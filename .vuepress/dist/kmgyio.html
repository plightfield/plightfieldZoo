<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Rxjs使用定性 | FrontEnd</title>
    <meta name="description" content="前端开发">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.b1cbcfde.css" as="style"><link rel="preload" href="/assets/js/app.57a50334.js" as="script"><link rel="preload" href="/assets/js/2.5c290dba.js" as="script"><link rel="preload" href="/assets/js/5.dd1512c7.js" as="script"><link rel="prefetch" href="/assets/js/3.daa0f364.js"><link rel="prefetch" href="/assets/js/4.42eb01a9.js"><link rel="prefetch" href="/assets/js/6.c6f636a4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b1cbcfde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">FrontEnd</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/kmgyio.html" class="active sidebar-link">Rxjs使用定性</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rxjs使用定性"><a href="#rxjs使用定性" class="header-anchor">#</a> Rxjs使用定性</h1> <p>&lt;div class=&quot;lake-content-editor-core lake-engine lake-typography-classic&quot; data-lake-element=&quot;root&quot; data-selection-466250=&quot;%7B%22path%22%3A%5B%5B35%2C0%2C19%5D%2C%5B35%2C0%2C19%5D%5D%2C%22uuid%22%3A%22466250%22%2C%22active%22%3Atrue%7D&quot;&gt;&lt;p data-lake-id=&quot;a20d224c568e48b9d67847a2c66a8c01_p_0&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;Rxjs 使用非常广泛，包括Angular中默认集成，vue-rx 以及c ycle.js ，响应式开发的理念渐渐深入人心。&lt;/p&gt;&lt;p class data-lake-id=&quot;94c609cae454d9cee86f4ad391c25273&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;甚至在 React 的开发过程中，mobx 以及 hooks 在很多函数式开发思想上也和 Rxjs 不谋而合。&lt;/p&gt;&lt;p class data-lake-id=&quot;e33e41f6cb60df282788771c2dcc66d1&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;当然，Rxjs 可能不符合 React 少即是多的理念（ React 程序员可能认为它过度封装）。&lt;/p&gt;&lt;p class data-lake-id=&quot;5014eec56d12cc3ddc1ad02610d40a50&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;但是对于我这样的“&lt;strong&gt;面向不加班开发程序员&lt;/strong&gt;”，一手 Rx 搭配 HHKB ，已经尝到了很多快速完成工作，上班盯盘喝咖啡写外包的甜头了，所以很激动地想要和大家分享 Rxjs ，以及其背后的开发思想。&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;0dbec8e281c0ef3b11a6ba7cc60ceeb6&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;至于HHKB就是另外的话题了&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;fa977f861b3e10287564c830a7343dc6&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p class data-lake-id=&quot;772dd1a155d4ae4f506064b95637146c&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;简单一句话总结：&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;de9986526884e162b6893b34694fd45a&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;注重业务的内在逻辑，而不是关注数据的变化&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;84cd489da4b8ab57c136b678871fe978&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;翻译成程序语言的就是：&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;4fad6d2f811c60b56ebafac231f425a7&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;别写变量，忘掉 var 和 let&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;24f341a8f312608060a0e479452d17b9&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;你不要写出 this.xxx = yyy 的代码，因为一旦写出变量，就意味着调试，错误，就意味着debug，就意味着你短时间内下不了班。&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;8e634f60b69f35d654da85b1903f4ab0&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;那我写出 handle(xxx) 的代码替换掉直接赋值的逻辑可以么？&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;85f1ac5555d5cc678efdeabc21cd93d4&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;当然比直接赋值好啊，但是，handle 函数运行完了以后呢？函数的输出也需要你进行处理。&lt;/p&gt;&lt;p class data-lake-id=&quot;c9edead95673be221c4e89bc0010dd89&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;于是有了 Redux 模式，即，所有函数运行的结果，都作用于唯一的数据源，这样调试都针对同一数据。&lt;/p&gt;&lt;p class data-lake-id=&quot;2b7ad43f5a4d37b58c3cc5b7d3f0b195&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;很好，但是，这个数据源会不会太大，而且，你写的每一个函数，都是单独的处理全局数据，函数逻辑之间是割裂的，每当你实现逻辑的时候，都得考虑一个冗余的数据结构，同样会妨碍你及早下班和女友出去浪。&lt;/p&gt;&lt;p class data-lake-id=&quot;df51afd718f5e35b1b23d8c56840ebc3&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;其实，更高效的方式应该是：&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;618be959d38cd0948eaaa20ad9025e49&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;pipe(handle1,handle2,handle3,handle4)&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;82fb1edc1944f77c8d29d2cccc10d322&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;这其实是函数式开发的概念，即，多个函数可以被组合成一个函数，而 Rxjs 的管道，是多个处理 monad 的函数，组合成一个函数，可谓函数式集大成者。&lt;/p&gt;&lt;p class data-lake-id=&quot;3abe20b9febbc4cb41bd6a72a9feb22e&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;比如一个需求：&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;e2ceeb8dd65c4c6525006356e19fbd87&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;将数据去重，过滤，400秒后发送&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;35a679cb3fcdff3be2574ca9946ceda1&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;你的想法是啥？&lt;/p&gt;&lt;p class data-lake-id=&quot;2d1628a1b652128e1a3435e215833b5c&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;redux 的思想：&lt;/p&gt;&lt;div data-card-type=&quot;block&quot; data-lake-card=&quot;codeblock&quot; id=&quot;LEK7l&quot; class=&quot;lake-card-margin&quot; data-language=&quot;javascript&quot;&gt;&lt;div class=&quot;lake-codeblock-content&quot; style=&quot;border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);&quot;&gt;&lt;div class style=&quot;color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);&quot;&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>const data = [...]
function reducer (data,action){
if(action === 'distinct'){
  // ...
 return data
}
if(action === 'filter'){
 // ...
 return data
}
if(action === 'send'){
  // ... 不考虑异步处理
  setTimeout(()=&gt;{
     return data
  }，400)
} 
}

dispatch('distict')
dispatch('filter')
dispatch('send') 
</code></pre></div><p>&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p data-lake-id=&quot;60a7b642bacc3334f0ba5326ab856de2&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;拜托，又是各种函数，又是异步处理，等你实现这个需求，女友都和外卖小哥跑了。&lt;/p&gt;&lt;p class data-lake-id=&quot;e88ff92291c5a55365440f96f2e0f6a8&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;为啥这个方式会很繁琐（已经是伪代码了还那么烦），因为，它关注具体数据了（data本身也是具体数据）。&lt;/p&gt;&lt;p class data-lake-id=&quot;422235cb8a6411ac4296b153320c0a24&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;换个方式，试试Rxjs：&lt;/p&gt;&lt;div data-card-type=&quot;block&quot; data-lake-card=&quot;codeblock&quot; id=&quot;KxRYk&quot; class=&quot;lake-card-margin&quot; data-language=&quot;javascript&quot;&gt;&lt;div class=&quot;lake-codeblock-content&quot; style=&quot;border: 1px solid rgb(232, 232, 232); max-width: 750px; color: rgb(89, 89, 89); margin: 0px; padding: 0px; background: rgb(249, 249, 249);&quot;&gt;&lt;div class style=&quot;color: rgb(89, 89, 89); margin: 0px; padding: 16px; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);&quot;&gt;</p> <div class="language-undefined extra-class"><pre class="language-text"><code>const data = new BehaviorSubject([...])
data.pipe(distinct(),filter(res=&gt;true),debounceTime(400)) 
</code></pre></div><p>&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p data-lake-id=&quot;b3d70ffd8655dbcaeaf92da26fa2a964&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;下班回家！哈哈哈！&lt;/p&gt;&lt;p class data-lake-id=&quot;d97a275e2fcd164bf745bf71288109f5&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;如果英语不方便观察，试试把操作符用中文替换一下：&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;b9dbc8ab71a1896d949172d26856ad76&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;声明 data 是一个 行为对象&lt;/p&gt;&lt;p class data-lake-id=&quot;516315af1e4e6c429f309674b7792491&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;data 用管道( 去重() , 过滤（返回true的函子），等待（400）秒返回 ) 处理&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;e1b022cb8562fa77cb2e9a16147a0c61&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;这，完完全全就是业务的直译 ...&lt;/p&gt;&lt;p class data-lake-id=&quot;13ab4cfdc5b95bf6c816ee6bf4083354&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;要调试么？管道只调试输入输出，中间逻辑用tap（一般情况下如果你知道操作符是干嘛的，不合预期就是你操作符用错了），哈，一个变量都没有，而且只是声明了数据，实现过程中具体数据与你无关，即 —— &lt;strong&gt;无状态编程&lt;/strong&gt;&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;2d2b644b15847f614c2ddf84171731bd&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;偷偷说一下，我喜欢用 vue-rx 搭配全局mixin，把用到的 rx 函数全部换成中文，因为直击业务逻辑的编程方式，还是自己的母语来的更有感觉，话说我得的程序员生涯是不是到头了？&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;8fd6e6c77bb94b07d94c362254505e1f&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;所以，Rx 的 API 是对业务逻辑的封装，说它只是用来处理异步，有些小瞧他了。&lt;/p&gt;&lt;blockquote style=&quot;margin-top: 5px; margin-bottom: 5px; padding-left: 1em; margin-left: 0px; border-left: 3px solid rgb(238, 238, 238); opacity: 0.6;&quot;&gt;&lt;p class data-lake-id=&quot;0cfa2b3646cc70420a9c55e905ebf4eb&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;笑话，js 主线程是一个单独的线程，没有异步一个业务逻辑都实现不了，所谓 Rx 是用来处理异步的，这句话潜台词就是，Rx 就是用来写业务的&lt;/p&gt;&lt;/blockquote&gt;&lt;p class data-lake-id=&quot;1c657f237867d0e79a42316a070917d4&quot; style=&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;&quot;&gt;差不多可以一窥全豹了，接下来开始学习 Rxjs 吧~&lt;/p&gt;&lt;/div&gt;</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.57a50334.js" defer></script><script src="/assets/js/2.5c290dba.js" defer></script><script src="/assets/js/5.dd1512c7.js" defer></script>
  </body>
</html>
